

@if (reportes) {

    <div class="grid">
        <!-- Total Habitaciones -->
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0 bg-teal-500 hover:shadow-2xl hover:scale-105 transition-all duration-300">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-white font-medium mb-3">Total Habitaciones</span>
                        @if (reportes) {
                            <div class="text-white font-medium text-4xl">{{reportes.total_habitaciones}}</div>
                        }
                    </div>
                    <div class="flex align-items-center justify-content-center bg-teal-100 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="fas fa-bed text-teal-600 text-xl"></i>
                    </div>
                </div>
                <span class="text-white font-medium">Habitaciones </span>
                <span class="text-white">Desde la última visita</span>
                <div class="mt-3">
                    <p-button label="Ver Detalles" routerLink="/modulo/habitaciones" [rounded]="true" [raised]="true" severity="warning" styleClass="w-full hover:scale-105 transition-all duration-200">
                        <i class="fas fa-hand-point-up mr-2"></i>
                    </p-button>
                </div>
            </div>
        </div>

        <!-- Habitaciones Disponibles -->
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0 bg-blue-600 hover:shadow-2xl hover:scale-105 transition-all duration-300">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-white font-medium mb-3">Habitaciones Disponibles</span>
                        @if (reportes) {
                            <div class="text-white font-medium text-4xl">{{reportes.habitaciones_disponibles}}</div>
                        }
                    </div>
                    <div class="flex align-items-center justify-content-center bg-blue-200 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="fas fa-door-open text-blue-700 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">%{{reportes.porcentaje_ocupadas | number:'1.0-0'}} ocupadas</span>
                <span class="text-white"> Desde la última semana</span>
                <div class="mt-3">
                    <p-button label="Ver Disponibilidad" [rounded]="true" [raised]="true" severity="warning" styleClass="w-full hover:scale-105 transition-all duration-200">
                        <i class="fas fa-hand-point-up mr-2"></i>
                    </p-button>
                </div>
            </div>
        </div>

        <!-- Habitaciones Ocupadas -->
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0 bg-red-600 hover:shadow-2xl hover:scale-105 transition-all duration-300">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-white font-medium mb-3">Habitaciones Ocupadas</span>
                        @if (reportes) {
                            <div class="text-white font-medium text-4xl">{{reportes.habitaciones_ocupadas}}</div>
                        }
                    </div>
                    <div class="flex align-items-center justify-content-center bg-red-200 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="fas fa-door-closed text-red-700 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">%{{reportes.porcentaje_ocupadas | number:'1.0-0'}} ocupadas</span>
                <span class="text-white"> Desde la última semana</span>
                <div class="mt-3">
                    <p-button label="Ver Detalles" [rounded]="true" [raised]="true" severity="warning" styleClass="w-full hover:scale-105 transition-all duration-200">
                        <i class="fas fa-hand-point-up mr-2"></i>
                    </p-button>
                </div>
            </div>
        </div>

        <!-- Total de Huéspedes -->
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0 bg-purple-600 hover:shadow-2xl hover:scale-105 transition-all duration-300">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-white font-medium mb-3">Total de Huéspedes</span>
                        @if (reportes) {
                            <div class="text-white font-medium text-4xl">{{reportes.total_huespedes}}</div>
                        }
                    </div>
                    <div class="flex align-items-center justify-content-center bg-purple-200 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="fas fa-users text-purple-600 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">{{reportes.nuevos_registrados_hoy}} nuevos</span>
                <span class="text-white"> Registrados hoy</span>
                <div class="mt-3">
                    <p-button label="Ver Huéspedes" [rounded]="true" [raised]="true" severity="warning" styleClass="w-full hover:scale-105 transition-all duration-200">
                        <i class="fas fa-hand-point-up mr-2"></i>
                    </p-button>
                </div>
            </div>
        </div>

        <!-- Huéspedes Activos -->
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0 bg-green-500 hover:shadow-2xl hover:scale-105 transition-all duration-300">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-white font-medium mb-3">Huéspedes Activos</span>
                        @if (reportes) {
                            <div class="text-white font-medium text-4xl">{{reportes.huespedes_activos}}</div>
                        }
                    </div>
                    <div class="flex align-items-center justify-content-center bg-green-200 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="fas fa-user-check text-green-600 text-xl"></i>
                    </div>
                </div>
                <span class="text-bluegray-900 font-medium">{{reportes.huespedes_activos}} activos</span>
                <span class="text-white"> En el hotel actualmente</span>
                <div class="mt-3">
                    <p-button label="Ver Huéspedes" [rounded]="true" [raised]="true" severity="warning" styleClass="w-full hover:scale-105 transition-all duration-200">
                        <i class="fas fa-hand-point-up mr-2"></i>
                    </p-button>
                </div>
            </div>
        </div>

        <!-- Reservas Pendientes -->
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0 bg-yellow-500 hover:shadow-2xl hover:scale-105 transition-all duration-300">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-white font-medium mb-3">Reservas Pendientes</span>
                        @if (reportes) {
                            <div class="text-white font-medium text-4xl">{{reportes.reservas_pendientes}}</div>
                        }
                    </div>
                    <div class="flex align-items-center justify-content-center bg-yellow-200 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="fas fa-calendar-alt text-yellow-600 text-xl"></i>
                    </div>
                </div>
                <span class="text-bluegray-900 font-medium">{{reportes.pendientes_por_confirmar_hoy}} pendientes</span>
                <span class="text-white"> Por confirmar hoy</span>
                <div class="mt-3">
                    <p-button label="Ver Reservas" [rounded]="true" [raised]="true" severity="warning" styleClass="w-full hover:scale-105 transition-all duration-200">
                        <i class="fas fa-hand-point-up mr-2"></i>
                    </p-button>
                </div>
            </div>
        </div>

        <!-- Ingresos Hoy -->
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0 bg-orange-500 hover:shadow-2xl hover:scale-105 transition-all duration-300">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-white font-medium mb-3">Ingresos Hoy</span>
                        @if (reportes) {
                            <div class="text-white font-medium text-4xl">Bs. {{reportes.ingresos_hoy}}</div>
                        }
                    </div>
                    <div class="flex align-items-center justify-content-center bg-orange-200 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="fas fa-dollar-sign text-orange-600 text-xl"></i>
                    </div>
                </div>
                <span class="text-bluegray-900 font-medium">Total de ingresos</span>
                <span class="text-bluegray-900"> Desde la última visita</span>
                <div class="mt-3">
                    <p-button label="Ver Ventas" [rounded]="true" [raised]="true" severity="warning" styleClass="w-full hover:scale-105 transition-all duration-200">
                        <i class="fas fa-hand-point-up mr-2"></i>
                    </p-button>
                </div>
            </div>
        </div>

        <!-- Ingresos Totales -->
        <div class="col-12 lg:col-6 xl:col-3">
            <div class="card mb-0 bg-indigo-600 hover:shadow-2xl hover:scale-105 transition-all duration-300">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-white font-medium mb-3">Ingresos Totales</span>
                        @if (reportes) {
                            <div class="text-white font-medium text-4xl">Bs. {{reportes.ingresos_totales}}</div>
                        }
                    </div>
                    <div class="flex align-items-center justify-content-center bg-indigo-200 border-round" [ngStyle]="{width: '2.5rem', height: '2.5rem'}">
                        <i class="fas fa-chart-line text-indigo-600 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium"> Bs {{reportes.ingresos_este_mes}} </span>
                <span class="text-white">  Total acumulado este mes</span>
                <div class="mt-3">
                    <p-button label="Ver Ingresos" [rounded]="true" [raised]="true" severity="warning" styleClass="w-full hover:scale-105 transition-all duration-200">
                        <i class="fas fa-hand-point-up mr-2"></i>
                    </p-button>
                </div>
            </div>
        </div>
    </div>
}



@if (reportes) {
    <div class="grid">
        <!-- Columna izquierda: Tablas y listas -->
        <div class="col-12 xl:col-6">
          <!-- Top Huéspedes -->
          <div class="card">
            <h5>Top Huéspedes</h5>
            <p-table [value]="reportes.top_huespedes" [paginator]="true" [rows]="5" responsiveLayout="scroll">
              <ng-template pTemplate="header">
                <tr>
                  <th>Nombre</th>
                  <th>Apellido</th>
                  <th>Nacionalidad</th>
                  <th>Reservas</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-huesped>
                <tr>
                  <td>{{huesped.nombre}}</td>
                  <td>{{huesped.apellido}}</td>
                  <td>{{huesped.nacionalidad}}</td>
                  <td>{{huesped.reservas_count}}</td>
                </tr>
              </ng-template>
            </p-table>
          </div>

          <!-- Huéspedes por Nacionalidad -->
          <div class="card mt-4">
            <div class="flex justify-content-between align-items-center mb-5">
              <h5>Huéspedes por Nacionalidad</h5>
            </div>
            <ul class="list-none p-0 m-0">
              <li *ngFor="let huesped of huespedesPorNacionalidad; let i = index"
                  class="flex flex-column md:flex-row md:align-items-center md:justify-content-between mb-4">
                <div>
                  <span class="text-900 font-medium mr-2 mb-1 md:mb-0">{{ huesped.nacionalidad }}</span>
                  <div class="mt-1 text-600">Total: {{ huesped.total }}</div>
                </div>
                <div class="mt-2 md:mt-0 flex align-items-center">
                  <div class="surface-300 border-round overflow-hidden w-10rem lg:w-6rem" [ngStyle]="{ height: '8px' }">
                    <div class="h-full" [ngClass]="getColor(i)" [ngStyle]="{ width: huesped.porcentaje + '%' }"></div>
                  </div>
                  <span [ngClass]="'text-' + getColor(i).split('-')[1] + '-500 ml-3 font-medium'">
                    {{ huesped.porcentaje }}%
                  </span>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <!-- Columna derecha: Gráficos -->
        <div class="col-12 xl:col-6">
          <!-- Gráfico de Clientes e Ingresos Diarios -->
          <div class="card">
            <h4>Clientes e Ingresos Diarios</h4>
            <p-chart type="line" [data]="dataDiarios" [options]="options" style="height: 300px;"></p-chart>
          </div>

          <!-- Gráfico de Clientes e Ingresos Mensuales -->
          <div class="card mt-4">
            <h4>Clientes e Ingresos Mensuales</h4>
            <p-chart type="line" [data]="dataMensuales" [options]="options" style="height: 300px;"></p-chart>
          </div>
        </div>
      </div>


}
